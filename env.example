# ReqAgent Environment Configuration
# Copy this file to .env and update with your actual values

# Database Configuration
DATABASE_URL=postgresql://username:password@localhost:5432/requirement_agent

# Individual database components (alternative to DATABASE_URL)
# PGHOST=localhost
# PGPORT=5432
# PGDATABASE=requirement_agent
# PGUSER=username
# PGPASSWORD=password

# Security Configuration
SECRET_KEY=your-very-secure-secret-key-here
CSRF_SECRET_KEY=another-secure-key-for-csrf-protection

# Admin Access Control
AUTHORIZED_EMAILS=admin@yourorg.com,qa@yourorg.com,manager@yourorg.com

# Admin Analytics Feature Flag
ADMIN_ANALYTICS_ENABLED=true

# Default Admin User (optional - will be created on first run)
DEFAULT_ADMIN_EMAIL=admin@yourorg.com
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=secure_password_123

# OpenAI Configuration (for content generation)
OPENAI_API_KEY=your-openai-api-key-here

# WordPress Integration (optional)
WP_API_URL=https://yoursite.com/wp-json/wp/v2
WP_USERNAME=your-wp-username
WP_APPLICATION_PASSWORD=your-wp-app-password

# File Storage Configuration
FILE_STORAGE_ROOT=/mnt/data/generated

# PDF Generation Engine (reportlab or weasyprint)
PDF_ENGINE=reportlab

# S3-Compatible Storage (Optional - for production persistence)
S3_ENDPOINT=https://your-s3-endpoint.com
S3_BUCKET=your-bucket-name
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key

# Phase 3: PDF Processing Configuration
MAX_UPLOAD_MB=20
MAX_PDF_PAGES=150
PDF_DOWNLOAD_TIMEOUT=30
PDF_MAX_REDIRECTS=5

# OCR Configuration (gated by environment)
OCR_BACKEND=none  # Options: none, textract, vision, self_hosted
OCR_CONFIDENCE_THRESHOLD=0.7

# AWS Textract (if OCR_BACKEND=textract)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# Google Cloud Vision (if OCR_BACKEND=vision)
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json
GOOGLE_CLOUD_PROJECT=your-project-id

# Environment Configuration
RAILWAY_ENV=dev
NODE_ENV=development

# Development Settings
DEV_CREATE_TABLES=false
DEBUG=true
LOG_LEVEL=INFO

# Application Configuration
APP_NAME=ReqAgent
APP_VERSION=2.0.0
APP_HOST=0.0.0.0
APP_PORT=8000

# Database Migration Settings
MIGRATION_AUTO_RUN=true
MIGRATION_RETRY_ATTEMPTS=3
MIGRATION_TIMEOUT=300

# Security Headers
CORS_ORIGINS=*
CORS_CREDENTIALS=true
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# Logging Configuration
LOG_FORMAT=json
LOG_CORRELATION_ID=true
LOG_SECRETS_FILTER=true
LOG_LEVEL=INFO
LOG_FILE=logs/reqagent.log

# Phase 4: Hardening & Observability Configuration
SANITIZE_ALLOW_TAGS=p,ul,li,a,strong,em,b,i
SANITIZE_MAX_STRING_LENGTH=10000
SANITIZE_MAX_LIST_ITEMS=50

# Site Profile Configuration
SITE_PROFILES_CONFIG=configs/sites.yml
SITE_PROFILES_RELOAD_INTERVAL=300

# Crawler Configuration
CRAWLER_MAX_RETRIES=3
CRAWLER_RATE_LIMIT_DEFAULT=1.0
CRAWLER_TIMEOUT_PAGE_LOAD=10000
CRAWLER_TIMEOUT_ELEMENT_WAIT=5000

# WordPress Publishing Configuration
WP_PUBLISH_MAX_RETRIES=3
WP_PUBLISH_RETRY_DELAY=2.0
WP_ENABLE_IDEMPOTENCY=true
WP_SEO_AUTO_FILL=true

# Error Reporting (Optional)
SENTRY_DSN=your-sentry-dsn-here

# Performance Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Health Check Settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

